<!DOCTYPE HTML>
<head>
<style>
	body {
		margin: 30px;
		font-family: arial, helvetica, sans-serif;
		background-color: #EDE7E1;
		color: #333;
	}
	p {
		max-width: 35em;
		font-size: 13px;
	}
	li {
		font-size: 13px;
	}
	h1 {
		font-size: 21px;
	}
	h2 {
		font-size: 17px;
	}
	h3 {
		font-size: 15px;
	}
	.index-item {
	}
</style>
</head>
<body>
<h1 id="threads">Threads</h1>

<h2 id="setting-the-windows-cursor">Setting the Windows Cursor</h2>
<p>erg.. It feels like it's going to take longer to describe the problems
with the system than to just fix it. But let it be said that there IS
a problem keeping the Windows cursor up to date. Right now it's always
behind by at least one mouse-move message. We need a more sophisticated
synchronization system than "add message to queue and forget".</p>

<p>The following diagrams are true for Windows. I intend to have the
other systems work in a similar fashion.</p>

<p>Event flow for a left mouse click:</p>

<pre><code>                Main Thread     UI Thread                         
                                                                  
                          +     +                                 
                          |     |                                 
              Left Click  | +-&gt; |  Perform some action in response
                          |     |  to the left click, and update  
                          |     |  the Canonical DOM              
Copy Canonical DOM from   | &lt;-+ |                                 
UI Thread to Main Thread  |     |                                 
                          |     |                                 
          Perform Layout  |     |                                 
                          |     |                                 
           Render to GPU  |     |                                 
                          |     |                                 
       Publish Layout as  |     |                                 
       new Latest Layout  |     |                                 
                          | +-&gt; |  Future DOM event processing    
                          |     |  uses the new Latest Layout     
                          |     |                                 
                          +     +                                 
</code></pre>

</body>